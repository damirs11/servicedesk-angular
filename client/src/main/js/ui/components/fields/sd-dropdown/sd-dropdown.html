<!--Режим редактирования активный-->
<div data-ng-if="ctrl.editing && !ctrl.disabled" class="sd-dropdown">
    <ui-select
               ng-model="ctrl.selectedValue"
               on-select="ctrl.onSelect($item,$model)"
               search-enabled="ctrl.searchEnabled"
    >
        <ui-select-match allow-clear="{{ctrl.isAllowClear}}" placeholder="{{ctrl.placeholder}}">
            <i ng-if="ctrl.hasIcons" ng-class="ctrl.getIconFor($select.selected)"></i>
            {{ctrl.display($select.selected)}}
        </ui-select-match>
        <ui-select-choices repeat="$value in ctrl.getFilteredValues($select.search) track by $index"
                           refresh="ctrl.fetchFromUI($select.search)"
                           refresh-delay="ctrl.debounceTime"
        >
            <div style="display: inline-block; width: 10px; text-align: center" ng-if="ctrl.hasIcons">
                <i ng-if="ctrl.hasIcons" ng-class="ctrl.getIconFor($value)"></i>
            </div>
            <span ng-bind-html="ctrl.display($value) | highlight: $select.search"></span>
        </ui-select-choices>
    </ui-select>
</div>

<!--Режим редактирования заблокированный-->
<div data-ng-if="ctrl.editing && ctrl.disabled" class="sd-dropdown">

    <div class="ui-select-container ui-select-bootstrap" disabled="disabled">
        <div class="ui-select-match ng-scope" disabled="disabled">
            <span tabindex="-1" class="form-control ui-select-toggle" style="outline: 0;" disabled="true">
                <i ng-if="ctrl.hasIcons" ng-class="ctrl.getIconFor(ctrl.selectedValue)"></i>
                <span class="ui-select-placeholder text-muted" ng-bind="ctrl.display(ctrl.selectedValue)"></span>
                <i class="caret pull-right"></i>
            </span>
        </div>
    </div>

</div>

<!--Режим просмотра-->
<div data-ng-if="!ctrl.editing" class="sd-dropdown-view">
    <a ng-show="ctrl.hasLinks" ng-href="{{ctrl.getLinkFor(ctrl.selectedValue)}}">
        <i ng-if="ctrl.hasIcons" ng-class="ctrl.getIconFor(ctrl.selectedValue)"></i>
        <span ng-bind="ctrl.display(ctrl.selectedValue)"></span>
    </a>
    <span ng-hide="ctrl.hasLinks">
        <i ng-if="ctrl.hasIcons" ng-class="ctrl.getIconFor(ctrl.selectedValue)"></i>
        <span ng-bind="ctrl.display(ctrl.selectedValue)"></span>
    </span>
</div>