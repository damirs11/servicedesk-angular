<div class="entity-container">
    <div class="entity-container__content">
        <form class="form-inline">
            <div class="form-group entity-text entity-text-required" style="width: 100%; height: 42px">
                <label>Тема:</label>
                <div class="entity-text__inline-field">
                    <sd-text target="ctrl.workorder.subject"
                             editing="true"
                             placeholder="Укажите тему"
                    >
                    </sd-text>
                </div>
            </div>

            <div class="form-group entity-text entity-text-required" style="width: 100%;">
                <label>Подробная информация:</label>
                <div class="entity-text__multiline-field">
                    <sd-textarea target="ctrl.workorder.description"
                                 editing="true"
                                 placeholder="Укажите подробную информацию"
                    >
                    </sd-textarea>
                </div>
            </div>
        </form>
    </div>

    <div class="entity-container__content">
        <form class="form-inline entity-properties">

            <div class="form-group e-prop e-prop-required">
                <label>Инициатор:</label>
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.initiator"
                             fetch-data="ctrl.loadInititators($text)"
                             placeholder="Введите имя персоны"
                             display-value="$value.fullName"
                             editing="true"
                             allow-empty="true"
                ></sd-dropdown>
            </div>

            <div class="form-group e-prop e-prop-required">
                <label>Исполнитель:</label>
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.assignment.executor"
                             fetch-data="ctrl.loadExecutors($text)"
                             placeholder="Введите имя персоны"
                             display-value="$value.fullName"
                             editing="true"
                             allow-empty="true"
                             fetch-on-change="ctrl.workorder.assignment.workgroup"
                ></sd-dropdown>
            </div>

            <div class="form-group e-prop e-prop-required">
                <label>Рабочая группа:</label>
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.assignment.workgroup"
                             fetch-data="ctrl.loadWorkgroups($text)"
                             placeholder="Введите название группы"
                             display-value="$value.name"
                             editing="true"
                             fetch-on-change="ctrl.workorder.assignment.executor"
                             allow-empty="true"
                ></sd-dropdown>
            </div>
        </form>
    </div>

    <div class="entity-container__content">
        <form class="form-inline entity-properties">

            <div class="form-group e-prop">
                <label>Крайний срок:</label>
                <sd-datetime
                        class="input-group e-prop__value"
                        target="ctrl.workorder.deadline"
                        allow-empty="false"
                        editing="true"
                ></sd-datetime>
            </div>

            <div class="form-group e-prop">
                <label>Приоритет:</label>
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.priority"
                             fetch-data="ctrl.loadPriorities($text)"
                             display-value="$value.fullName"
                             cache="true"
                             editing="true"
                             allow-empty="true"
                ></sd-dropdown>
            </div>

            <div class="form-group e-prop">
                <label>Категория:</label>
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.category"
                             fetch-data="ctrl.loadCategories($text)"
                             display-value="$value.name"
                             cache="true"
                             editing="true"
                             allow-empty="true"
                ></sd-dropdown>
            </div>

            <div class="form-group e-prop">
                <label>Папка:</label>
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.folder"
                             fetch-data="ctrl.loadFolders($text)"
                             display-value="$value.name"
                             editing="true"
                             allow-empty="true"
                ></sd-dropdown>
            </div>

            <div class="form-group e-prop">
                <label>Изменение:</label>
                <!--ToDo поправить fetch-data-->
                <sd-dropdown class="input-group e-prop__value"
                             target="ctrl.workorder.change"
                             display-value="'№'+$value.no"
                             fetch-data="ctrl.isChangeEditable && ctrl.loadChanges($text)"
                             editing="true"
                             disabled="ctrl.isChangePassed"
                             allow-empty="true"
                ></sd-dropdown>
            </div>

        </form>
    </div>

</div>

<!--
<button class="btn btn-default" ng-click="ctrl.createTestChange();">Создать тестовое изменение</button>-->
