# Сборка проекта

## Инструкция по развертыванию проекта:

1. Для сборки и запуска проекта необходим
    [JDK 1.8 x64](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
2. Для сборки использовать
    [Gradle 3.3](http://gradle.org/)
3. Команда для сборки проекта:

		gradle client:build server:war -i -g gradle
4. Команда для запуска локального приложения:

	    gradle client:build server:appStart -i -g gradle
    _Приложение будет доступно по адресу:_ https://localhost:8443/sd
5. Обновление статического контента у запущенного приложения:

	    gradle client:build
6. Отладка на порту 5005 приложения выполняется командой:

        gradle client:build server:appStartDebug
7. Отладка тестов выполняется командой (пример для модуля dao).

        gradle dao:test -i -g gradle -Dtest.debug

   После чего в режиме удаленной отладки подключаемся к процессу.

_Примечание:_ Флаги gradle:
* -i - вывод дополнительной информации в консоль о сборке
* -g gradle	- путь для локального кэша gradle

## Инструкция по сборке клиента с помощью gulp:


1. Для скачивания зависимостей необходим
   [NPM 3.10.10+](https://www.npmjs.com/)
   
     
 _все последующие команды исполняются в директории клиентского модуля_
1. Скачивание зависимостей
    ```CMD/BASH
    npm install
    ````
2. Сборка клиента
   ```CMD/BASH
   gulp build
   ```
3. Сборка с watch-режимом
   ```CMD/BASH
   gulp watch
   ```
4. Сборка с локальным livereload-сервером
    ```CMD/BASH
    gulp watch webserver:start --WEB_CONTEXT sd --API_ADDRESS https://localhost:8443
    ```
5. При сборке можно использовать параметры:

    **--SOURCE_MAPS** - добавляет в сборку сорц-мапы
    
    **--DEBUG** - собирает клиент в дебаг-режиме.
    
    **--WEB_CONTEXT** - контекст веб-приложения. Необходим для работы локального сервера, должен совпадать с контекстом API
    
    **--API_ADDRESS** - адрес сервера с API
    
    Пример:
    ```CMD/BASH
    gulp build --SOURCE_MAPS --DEBUG
    ```
    
___Примечание:___ _gradle client:build_ выполняет ___gulp default --SOURCE_MAP --DEBUG___